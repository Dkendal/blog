<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Batch export Org-mode pages - Digital Janitorial Services</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A common task if - like me - you use Org-mode to create static websites; is to export the document to your destination format. Take this blog for instance. It&rsquo;s written in Org-mode, which is exported to markdown for use by Hugo which will then compile it to HTML. The obvious choice for exporting your content would be to call the command directly within Emacs, but say you wanted to do this as a part of some other build process or as part of an automated continuous deployment process it would be necessary to invoke the export command from the shell."><meta property="og:image" content><meta property="og:title" content="Batch export Org-mode pages"><meta property="og:description" content="A common task if - like me - you use Org-mode to create static websites; is to export the document to your destination format. Take this blog for instance. It&rsquo;s written in Org-mode, which is exported to markdown for use by Hugo which will then compile it to HTML. The obvious choice for exporting your content would be to call the command directly within Emacs, but say you wanted to do this as a part of some other build process or as part of an automated continuous deployment process it would be necessary to invoke the export command from the shell."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.dkendal.com/pages/batch-export-org-mode-pages/"><meta property="article:section" content="pages"><meta property="article:published_time" content="2020-06-27T18:03:00+00:00"><meta property="article:modified_time" content="2022-07-25T16:16:31+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Batch export Org-mode pages"><meta name=twitter:description content="A common task if - like me - you use Org-mode to create static websites; is to export the document to your destination format. Take this blog for instance. It&rsquo;s written in Org-mode, which is exported to markdown for use by Hugo which will then compile it to HTML. The obvious choice for exporting your content would be to call the command directly within Emacs, but say you wanted to do this as a part of some other build process or as part of an automated continuous deployment process it would be necessary to invoke the export command from the shell."><script src=https://blog.dkendal.com/js/feather.min.js></script>
<link href=https://blog.dkendal.com/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://blog.dkendal.com/css/main.40ca3a860425083862b7ebd55447caec5c4384573f0cb098b8d06a91e8dace2e.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://blog.dkendal.com/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css disabled><script async src="https://www.googletagmanager.com/gtag/js?id=G-QRNY1HKHWT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QRNY1HKHWT",{anonymize_ip:!1})}</script></head><body><div class=content><header><div class=main><a href=https://blog.dkendal.com/>Digital Janitorial Services</a></div><nav><a href=/>Home</a>
| <a id=dark-mode-toggle onclick=toggleTheme() href></a>
<script src=https://blog.dkendal.com/js/themetoggle.js></script></nav></header><main><article><div class=title><h1 class=title>Batch export Org-mode pages</h1><div class=meta>Posted on Jun 27, 2020</div></div><section class=body><p>A common task if - like me - you use <em>Org-mode</em> to create static
websites; is to export the document to your destination format.
Take this blog for instance. It&rsquo;s written in <em>Org-mode</em>, which is
exported to <em>markdown</em> for use by <em>Hugo</em> which will then compile it
to <em>HTML</em>. The obvious choice for exporting your content would be
to call the command directly within Emacs, but say you wanted to do
this as a part of some other build process or as part of an
automated continuous deployment process it would be necessary to
invoke the export command from the shell.</p><p>Fortunately, Emacs provides the ability to use it in a non-interactive
manner via the <code>--batch</code> flag.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>--batch                     do not do interactive display; implies -q
</span></span><span style=display:flex><span>--no-init-file, -q          load neither ~/.emacs nor default.el</span></span></code></pre></div><p>Running Emacs in batch mode we just need to open our <em>Org-mode</em>
document, either programmatically or with the <code>--visit FILE</code> flag, load
whatever <em>Org-mode exporter</em> library, and call its export function. I&rsquo;m
using <em>ox-Hugo</em> so that&rsquo;s what&rsquo;ll I&rsquo;ll require. It&rsquo;s also necessary to
ensure the Emacs can load this library; the easiest way I
know how to do this is to call <code>(package-initialize)</code>, which loads <em>all</em>
packages so I don&rsquo;t need to adjust load paths or load individual
packages.</p><p>The solution to my particular situation where I&rsquo;m exporting the
entire document to markdown intended for Hugo as part of a build
process on my machine looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>index<span style=color:#f92672>=</span>./content-org/index.org
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>progn<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;(progn
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  (package-initialize)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  (require &#39;ox-hugo)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  (org-hugo-export-wim-to-md :all-subtrees nil nil))&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>emacs --batch --visit <span style=color:#e6db74>&#34;</span>$index<span style=color:#e6db74>&#34;</span> --eval <span style=color:#e6db74>&#34;</span>$progn<span style=color:#e6db74>&#34;</span> --kill</span></span></code></pre></div><p>The <code>--eval</code> flag is used to run by export commands, but you
could have just as easily put these command in their own <em>dot el</em> file
and load that - or put each <em>sexp</em> as it&rsquo;s own argument to
<code>--eval</code>.</p><p>Note that this isn&rsquo;t tested for a continuous deployment environment
and you&rsquo;d likely have to adjust a few things to ensure that
packages are available and whatnot.</p><p>Only three posts in and I&rsquo;ve already managed to make a meta post
about how this blog is created.</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/emacs>emacs</a></li><li><a href=/tags/orgmode>orgmode</a></li><li><a href=/tags/hugo>hugo</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://www.linkedin.com/in/dylan-kendal-24027545/ title="Dylan's LinkedIn account"><i data-feather=linkedin></i></a><a class=soc href=https://github.com/Dkendal title="Dylan's GitHub account"><i data-feather=github></i></a></div><div class=footer-info>2022</div></footer><script>feather.replace()</script></div></body></html>